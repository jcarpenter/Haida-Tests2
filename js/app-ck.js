"use strict";var App=App||{};App.createNS=function(e){var t=e.split("."),n=App;t[0]==="App"&&(t=t.slice(1));for(var r=0;r<t.length;r++){var i=t[r];typeof n[i]=="undefined"&&(n[i]={});n=n[i]}return n};(function(e,t){e.init=function(){}})(App);App.createNS("ScreenManager");App.ScreenManager=function(){var e,t,n=document.getElementById("bottom-swipe"),r=document.getElementById("topleft-swipe"),i=document.getElementById("topright-swipe"),s=document.getElementById("status-bar"),o=document.getElementById("rocketbar-drawer"),u=document.getElementById("settings-drawer"),a=document.getElementById("keyboard");n.addEventListener("click",function(){App.History.get_active_screen().id=="home"&&console.log("already home")});r.addEventListener("click",function(){e||t||pubsubz.publish("open_topdrawer1")});i.addEventListener("click",function(){e||t||pubsubz.publish("open_topdrawer2")});var f=function(){$(a).animo({animation:"showKeyboard",duration:.2,timing:"ease-out",keep:"true"})},l=function(){$(a).animo({animation:"hideKeyboard",duration:.2,timing:"ease-out",keep:"true"})},c=function(){f();$(s).animo({animation:"openFullRocketBar",duration:.2,timing:"ease-out",keep:"true"});$(o).children("#cursor").animo({animation:"blinking",duration:1,timing:"ease-out",iterate:"infinite"});$(o).children("#background").animo({animation:"darkenBG",duration:.3,timing:"ease-out",keep:"true"});o.classList.toggle("hidden");e=!0},h=function(){l();$(s).animo({animation:"closeFullRocketBar",duration:.2,timing:"ease-out"});$(o).animo({animation:"fadeOut",duration:.2,timing:"ease-out",keep:"true"},function(){$(o).animo("cleanse");$(o).children().animo("cleanse");o.classList.toggle("hidden");e=!1})},p=function(){$(u).animo({animation:"darkenBG",duration:.3,timing:"ease-out",keep:"true"});$(u).children("img").animo({animation:"slideInDown",duration:.3,timing:"ease-out",keep:"true"});u.classList.toggle("hidden");t=!0},d=function(){$(u).animo({animation:"lightenBG",duration:.3,timing:"ease-out",keep:"true"});$(u).children("img").animo({animation:"slideOutUp",duration:.3,timing:"ease-out"},function(){$(u).animo("cleanse");$(u).children("img").animo("cleanse");u.classList.toggle("hidden");t=!1})},v=function(e){this.name=e.name;this.id=e.id;this.number=e.number;this.type=e.type;this.chrome=e.chrome;var t=$("#Sheet").html(),n=Handlebars.compile(t),r=n(e);$(frame).append(r);this.html=$(frame).find("#sheet_"+this.id+"_"+this.number)},m=function(e,t){if(t.id=="home"){set_active_screen(t);console.log(active_screen.id)}else t.chrome=="site"&&active_screen.chrome=="site"&&console.log("load site in current window");var n=new v(t);$(n.html).click(function(){console.log(n.name);console.log(n.id);console.log(n.number);console.log(n.type);console.log(n.chrome)})},g=function(){o.classList.toggle("hidden");u.classList.toggle("hidden")},y=pubsubz.subscribe("init",g),b=pubsubz.subscribe("open_topdrawer1",c),w=pubsubz.subscribe("close_topdrawer1",h),E=pubsubz.subscribe("open_topdrawer2",p),S=pubsubz.subscribe("close_topdrawer2",d),x=pubsubz.subscribe("open_sheet",m);return{}}();App.createNS("History");App.History=function(){var e={},t=[],n=[],r=function(t){e=t;console.log("The active screen is now: "+e.id+"_"+e.number)},i=function(){return e},s=function(){console.log(t.length);console.log(n.length)};return{set_active_screen:r,get_active_screen:i,history_list:t,update_count:s}}();App.createNS("Home");App.Home=function(){var e=function(){App.History.set_active_screen({name:"Home",id:"home",number:"0"});$.getJSON("js/preloads.json",function(e){$.each(e.preloads,function(e,t){App.Icon.make_icon(t)})})},t=pubsubz.subscribe("init",e)}();App.createNS("Icon");App.Icon=function(e){var t=function(e){this.name=e.name;this.id=e.id;this.number=e.number;this.type=e.type;this.chrome=e.chrome;var t=$("#appIcon").html(),n=Handlebars.compile(t),r=n(e);$(home).append(r);this.html=$(home).find("#icon_"+this.id)},n=function(e){var n=new t(e);App.BookmarkList.add_new(n);$(n.html).click(function(){pubsubz.publish("open_sheet",n)})};return{make_icon:n}}();App.createNS("Bookmarks");App.BookmarkList=function(){var e=[],t=function(t){e.push(t)};return{add_new:t,list:e}}();pubsubz.publish("init");